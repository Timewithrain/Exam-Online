<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	
	<script src="js/jquery-1.9.1.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/count-down.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/bulletWindow.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/makeExam.js" type="text/javascript" charset="utf-8"></script>
	<script>
		// 保存所有题目
		var topics;
		// 保存用户的选项
		var userOptions = new Array();
		// 保存题目正确的选项
		var rightAnswers = new Array();
		// 保存题目的分数
		var grades = new Array();

		// 根据参数生成页面元素
		function createTopic(i,title,answers){
			var titleDIV = '<div class="title"><p>'+title+'</p></div>';
				var contentDIV = '<div class="content">'+
						'<ul class="options">'+
							'<li class="option">'+
								'<label >'+
									'<input type="radio" name="ques'+i+'" value="A" class="Op-button">'+
									'<span class="radio"></span>'+
									'<span class="item">A.'+answers[0]+'</span>'+
								'</label>'+
							'</li>'+
							'<li class="option">'+
								'<label >'+
									'<input type="radio" name="ques'+i+'" value="B" class="Op-button">'+
									'<span class="radio"></span>'+
									'<span class="item">B.'+answers[1]+'</span>'+
								'</label>'+
							'</li>'+
							'<li class="option">'+
								'<label >'+
									'<input type="radio" name="ques'+i+'" value="C" class="Op-button">'+
									'<span class="radio"></span>'+
									'<span class="item">C.'+answers[2]+'</span>'+
								'</label>'+
							'</li>'+
							'<li class="option">'+
								'<label>'+
									'<input type="radio" name="ques'+i+'" value="D" class="Op-button">'+
									'<span class="radio"></span>'+
									'<span class="item">D.'+answers[3]+'</span>'+
								'</label>'+
							'</li>'+
						'</ul>'+
					'</div>';
			var topicLI = '<li>'+titleDIV+contentDIV+'</li>';
			$(".topics").append(topicLI);
		}

		// 根据用户选项以及正确答案计算成绩
		function getGrade(userOptions,rightAnswers){
			var grade = 0;
			for(var i=0;i<topics.length;i++){
				var val = $('input[name="ques'+(i+1)+'"]:checked').val();
				// 此处还无法判断
				console.log(val+":"+rightAnswers[i])
				if(val==rightAnswers[i]){
					grade = grade + 5;
				}
			}
			alert("最终得分为：" + grade);
		}

		// 解析json并生成页面元素
		$.post("begin",function(data){
			// 解析json串
			topics = data["topics"];
			for(var i=0;i<topics.length;i++){
				var topic = topics[i];
				// 获取题目
				var title = topic["topic"];
				// 获取答案
				var answers = new Array();
				for(var j=0;j<topic["answers"].length;j++){
					answers.push(topic["answers"][j]);
				}
				// 获取并记录正确答案
				var rightAnswer = topic["rightAnswer"];
				rightAnswers.push(rightAnswer);
				// 获取题目分数
				var grade = topic["grade"];
				grades.push(grade);
				// 生成页面元素
				createTopic(i+1,title,answers);
			}
    	},"json");
	</script>
 	<link rel="stylesheet" href="css/exam_Sub.css" type="text/css"></link>
 	
	<body>
	   <div id="mydiv">
	   	 <div id="divFrame">
    		<div class="exam-herder">
    			<center> 
    				<p><font size=+3>考试试卷名字</font></p>
    			</center>
    			<center>
    				出卷人:XXX  分值:100   考试时间:120分钟
    				<div id="timer"></div>
 					<div id="warring"></div>
    			</center>
    		</div>
    		<ol type="1" class="exam-content">
			<font size=+2>选择题</font>
			<br/>
			<hr>
			
			<div class="topics">

				<!-- <li>
					<div class="title">
						<p>这里是题目啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊</p>
					</div>
					<div class="content">
						<ul class="options">
							<li class="option">
								<label >
									<input type="radio" name="ques1" value="A" class="Op-button">
									<span class="radio"></span>
									<span class="item">A.这里是a选项内容呀</span>
								</label>
							</li>
							<li class="option">
								<label >
									<input type="radio" name="ques1" value="B" class="Op-button">
									<span class="radio"></span>
									<span class="item">B.这里是b选项内容呀</span>
								</label>
							</li>
							<li class="option">
								<label >
									<input type="radio" name="ques1" value="C" class="Op-button">
									<span class="radio"></span>
									<span class="item">C.这里是c选项内容呀</span>
								</label>
							</li>
							<li class="option">
								<label>
									<input type="radio" name="ques1" value="D" class="Op-button">
									<span class="radio"></span>
									<span class="item">D.这里是d选项内容呀</span>
								</label>
							</li>
						</ul>
					</div>
				</li> -->

			</div>
			
			<br>
			<!-- <font size=+2>判断题</font>
			<br/>
			<hr>
		
			<li>
				<form action="" method="get">
					<p class="title">这里是判断题题目啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊</p>
					<label>
							<input type="radio" name="ques1" value="1" class="Op-button">
							<span class="radio"></span>
							<span class="item">是&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
					</label>
					<label>
					<input type="radio" name="ques1" value="0" class="Op-button">
					<span class="radio"></span>
					<span class="item">否</span>
					</label><br />
				</form>
			</li>
    
    		<br><font size=+2>多选题</font><br/>
	    	<hr>
			<li>
				<form action="" method="get">
					<p class="title">这里是多选题题目啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊</p>
					<label>
						<input type="checkbox" name="ques1" value="A" class="Op-button">
						<span class="checkbox">
							<i>&check;</i>
						</span>
						<span class="item">A.这里是a选项内容呀</span>
					</label><br />
					<label>
						<input type="checkbox" name="ques1" value="B" class="Op-button">
						<span class="checkbox">
							<i>&check;</i>
						</span>
						<span class="item">B.这里是b选项内容呀</span>
					</label><br />
					<label>
						<input type="checkbox" name="ques1" value="A" class="Op-button">
						<span class="checkbox">
							<i>&check;</i>
						</span>
						<span class="item">C.这里是c选项内容呀</span>
					</label><br />
					<label>
						<input type="checkbox" name="ques1" value="A" class="Op-button">
						<span class="checkbox">
							<i>&check;</i>
						</span>
						<span class="item">D.这里是d选项内容呀</span>
					</label><br />						
				</form>
			</li> -->
    			
    	
				<center id="footer">
					<table >
						<tr>
							<td>&nbsp;&nbsp;&nbsp;</td>
							<td>&nbsp;&nbsp;&nbsp;</td>
							<td>	
								<td><font size＝ －1>**请务必答完全部题目,再提交试卷</font></td>
								<button type="button" class="ant-btn sgBtn" id="btn" onclick="getGrade(userOptions,rightAnswers)">提交答卷</button>
							</td>
						</tr>
					</table>
				</center>
    		</div>
	    </div>
		<div class="a suggest">
			<div class="a-header">
				<div>提示</div>
				<span class="vanish1"></span>
			</div>
			<div class="a-center">
				<div class="bigIcon icon1"></div>
				<p>是否确认提交答卷？</p>
			</div>
			<div class="a-footer">
				<div class="btnGroup">
					<div class="sgbtn ok1">确认</div>
					<div class="sgbtn cancel">取消</div>
				</div>
			</div>
		</div>
		<div class="a success">
			<div class="a-header">
				<div>成功</div>
				<span class="vanish2"></span>
			</div>
			<div class="a-center">
				<div class="bigIcon icon2"></div>
				<p>答卷提交成功</p>
			</div>
			<div class="a-footer">
				<div class="btnGroup">
					<a href="#"><div class="sgbtn ok2">确认</div></a>
				</div>
			</div>
		</div>	
	</body>
</html>
